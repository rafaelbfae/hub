(function(n){n.crmhub=n.crmhub||{};n.crmhub.logger={};var t={},i=n("#btnResend").ladda(),r=function(){var r=this;r.index=-1;r.Id=ko.observable();r.Crm=ko.observable().extend({required:!0});r.Send=ko.observable().extend({required:!0});r.Type=ko.observable().extend({required:!0});r.Entity=ko.observable().extend({required:!0});r.Method=ko.observable().extend({required:!0});r.Empresa=ko.observable().extend({required:!0});r.Response=ko.observable();r.CreatedAt=ko.observable().extend({required:!0});r.UpdatedAt=ko.observable().extend({required:!0});r.Parameters=ko.observable();r.Errors=ko.validation.group(r);r.isDisabled=ko.observable(!1);r.clearModel=function(){var t=Object.assign({},this);return delete t.isDisabled,delete t.Errors,delete t.Response,t.Send=n.trim(t.Send().replace(/([\t\n])+/g,"")),ko.toJSON(t)};r.submit=function(){if(r.Errors().length>0){r.Errors.showAllMessages();return}i.ladda("start");n("#logger\\.Type").removeClass("error");n("#logger\\.Type").removeClass("success");n.crmhub.core.ajax("PUT",`Logger/Resend?id=${r.Id()}`,r.clearModel(),function(i){r.setValues(i.data,i.success);t.row(r.index).data(i.data);i.success?(n("#logger\\.Type").removeClass("error"),n("#logger\\.Type").addClass("success")):n("#logger\\.Type").addClass("error")},function(n){alert(n.status+": "+n.statusText);r.Response(r.ident(n.responseText))},function(){r.Errors.showAllMessages(!1);i.ladda("stop")})};r.ident=function(n){var t=JSON.parse(n);return JSON.stringify(t,undefined,4)};r.jsons=function(t){n.crmhub.core.ajax("GET",`Logger/SendResponse?id=${t}`,null,function(t){r.Send(r.ident(t.send));r.Response(r.ident(t.response));n("#viewLogger").modal("show")})};r.view=function(n){r.setValues(n,!0);r.jsons(r.Id())};r.edit=function(n){r.setValues(n,!1);r.jsons(r.Id())};r.reset=function(){r.setValues({},!1)};r.load=function(){t=n.crmhub.core.initDataTableServeSide("Logger",-1,"Logger/All",[{data:"id"},{data:"empresa"},{data:"crm"},{data:"entity"},{data:"method"},{data:"type"},{data:"createdAt"},{data:"updatedAt"},{defaultContent:'<div class="action-buttons"><a class="table-actions" href="#"><i class="fa fa-eye"><\/i><\/a><a class="table-actions" href="#"><i class="fa fa-pencil"><\/i><\/a><\/div>'}],[[6,"desc"]]);t.on("click","a > i.fa-eye",function(){var i=t.row(n(this).parents("tr")).data();r.index=t.row(n(this).parents("tr")).index();r.view(i)});t.on("click","a > i.fa-pencil",function(){var i=t.row(n(this).parents("tr")).data();r.index=t.row(n(this).parents("tr")).index();r.edit(i)})};r.setValues=function(n,t){r.Id(n.id);r.Crm(n.crm);r.Send(r.ident(n.send));r.Type(n.type);r.Entity(n.entity);r.Method(n.method);r.Response(r.ident(n.response));r.CreatedAt(n.createdAt);r.UpdatedAt(n.updatedAt);r.Parameters(n.parameters);r.Empresa(n.empresa);r.isDisabled(t||n.type=="Success"||n.method=="Fields");r.Errors.showAllMessages(!1)};r.postProcessing=function(){console.log(elements)}};n(function(){var n=new r;ko.applyBindings(n);n.load()})})(jQuery);
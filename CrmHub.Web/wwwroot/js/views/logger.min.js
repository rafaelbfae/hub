(function(n){n.crmhub=n.crmhub||{};n.crmhub.logger={};var t=n("#btnResend").ladda(),i=function(){var i=this;i.index=-1;i.Id=ko.observable();i.Crm=ko.observable().extend({required:!0});i.Send=ko.observable().extend({required:!0});i.Type=ko.observable().extend({required:!0});i.Entity=ko.observable().extend({required:!0});i.Method=ko.observable().extend({required:!0});i.Empresa=ko.observable().extend({required:!0});i.Response=ko.observable();i.CreatedAt=ko.observable().extend({required:!0});i.UpdatedAt=ko.observable().extend({required:!0});i.Parameters=ko.observable();i.Errors=ko.validation.group(i);i.isDisabled=ko.observable(!1);i.clearModel=function(){var t=Object.assign({},this);return delete t.isDisabled,delete t.Errors,delete t.Response,t.Send=n.trim(t.Send().replace(/([\t\n])+/g,"")),ko.toJSON(t)};i.submit=function(){if(i.Errors().length>0){i.Errors.showAllMessages();return}t.ladda("start");n("#logger\\.Type").removeClass("error");n("#logger\\.Type").removeClass("success");n.crmhub.core.ajax("PUT",`Logger/Resend?id=${i.Id()}`,i.clearModel(),function(t){i.setValues(t.data,t.success);n.oTable.row(i.index).data(t.data);t.success?(n("#logger\\.Type").removeClass("error"),n("#logger\\.Type").addClass("success")):n("#logger\\.Type").addClass("error")},function(n){alert(n.status+": "+n.statusText);i.Response(i.ident(n.responseText))},function(){i.Errors.showAllMessages(!1);t.ladda("stop")})};i.ident=function(n){var t=JSON.parse(n);return JSON.stringify(t,undefined,4)};i.jsons=function(t){n.crmhub.core.ajax("GET",`Logger/SendResponse?id=${t}`,null,function(t){i.Send(i.ident(t.send));i.Response(i.ident(t.response));n("#viewLogger").modal("show")})};i.view=function(n){i.setValues(n,!0);i.jsons(i.Id())};i.edit=function(n){i.setValues(n,!1);i.jsons(i.Id())};i.reset=function(){i.setValues({},!1)};i.load=function(){n.oTable=n.crmhub.core.initDataTableServeSide("Logger",-1,"Logger/All",[{data:"id"},{data:"empresa"},{data:"crm"},{data:"entity"},{data:"method"},{data:"type"},{data:"createdAt"},{data:"updatedAt"},{defaultContent:'<div class="action-buttons"><a class="table-actions" href="#"><i class="fa fa-eye"><\/i><\/a><a class="table-actions" href="#"><i class="fa fa-pencil"><\/i><\/a><\/div>'}],[[6,"desc"]]);n.oTable.on("click","a > i.fa-eye",function(){var t=n.oTable.row(n(this).parents("tr")).data();i.index=n.oTable.row(n(this).parents("tr")).index();i.view(t)});n.oTable.on("click","a > i.fa-pencil",function(){var t=n.oTable.row(n(this).parents("tr")).data();i.index=n.oTable.row(n(this).parents("tr")).index();i.edit(t)})};i.setValues=function(n,t){i.Id(n.id);i.Crm(n.crm);i.Send(i.ident(n.send));i.Type(n.type);i.Entity(n.entity);i.Method(n.method);i.Response(i.ident(n.response));i.CreatedAt(n.createdAt);i.UpdatedAt(n.updatedAt);i.Parameters(n.parameters);i.Empresa(n.empresa);i.isDisabled(t||n.type=="Success"||n.method=="Fields");i.Errors.showAllMessages(!1)};i.postProcessing=function(){console.log(elements)}};n(function(){var n=new i;ko.applyBindings(n);n.load()})})(jQuery);